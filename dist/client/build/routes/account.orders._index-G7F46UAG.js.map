{
  "version": 3,
  "sources": ["../../../../app/routes/account.orders._index.tsx"],
  "sourcesContent": ["import {Link, useLoaderData, type MetaFunction} from '@remix-run/react';\nimport {\n  Money,\n  Pagination,\n  getPaginationVariables,\n  flattenConnection,\n} from '@shopify/hydrogen';\nimport {json, redirect, type LoaderFunctionArgs} from '@shopify/remix-oxygen';\nimport {CUSTOMER_ORDERS_QUERY} from '~/graphql/customer-account/CustomerOrdersQuery';\nimport type {\n  CustomerOrdersFragment,\n  OrderItemFragment,\n} from 'customer-accountapi.generated';\n\nexport const meta: MetaFunction = () => {\n  return [{title: 'Orders'}];\n};\n\nexport async function loader({request, context}: LoaderFunctionArgs) {\n  const paginationVariables = getPaginationVariables(request, {\n    pageBy: 20,\n  });\n\n  const {data, errors} = await context.customerAccount.query(\n    CUSTOMER_ORDERS_QUERY,\n    {\n      variables: {\n        ...paginationVariables,\n      },\n    },\n  );\n\n  if (errors?.length || !data?.customer) {\n    throw Error('Customer orders not found');\n  }\n\n  return json(\n    {customer: data.customer},\n    {\n      headers: {\n        'Set-Cookie': await context.session.commit(),\n      },\n    },\n  );\n}\n\nexport default function Orders() {\n  const {customer} = useLoaderData<{customer: CustomerOrdersFragment}>();\n  const {orders} = customer;\n  return (\n    <div className=\"orders\">\n      {orders.nodes.length ? <OrdersTable orders={orders} /> : <EmptyOrders />}\n    </div>\n  );\n}\n\nfunction OrdersTable({orders}: Pick<CustomerOrdersFragment, 'orders'>) {\n  return (\n    <div className=\"acccount-orders\">\n      {orders?.nodes.length ? (\n        <Pagination connection={orders}>\n          {({nodes, isLoading, PreviousLink, NextLink}) => {\n            return (\n              <>\n                <PreviousLink>\n                  {isLoading ? 'Loading...' : <span>\u2191 Load previous</span>}\n                </PreviousLink>\n                {nodes.map((order) => {\n                  return <OrderItem key={order.id} order={order} />;\n                })}\n                <NextLink>\n                  {isLoading ? 'Loading...' : <span>Load more \u2193</span>}\n                </NextLink>\n              </>\n            );\n          }}\n        </Pagination>\n      ) : (\n        <EmptyOrders />\n      )}\n    </div>\n  );\n}\n\nfunction EmptyOrders() {\n  return (\n    <div>\n      <p>You haven&apos;t placed any orders yet.</p>\n      <br />\n      <p>\n        <Link to=\"/collections\">Start Shopping \u2192</Link>\n      </p>\n    </div>\n  );\n}\n\nfunction OrderItem({order}: {order: OrderItemFragment}) {\n  const fulfillmentStatus = flattenConnection(order.fulfillments)[0]?.status;\n  return (\n    <>\n      <fieldset>\n        <Link to={`/account/orders/${order.id}`}>\n          <strong>#{order.number}</strong>\n        </Link>\n        <p>{new Date(order.processedAt).toDateString()}</p>\n        <p>{order.financialStatus}</p>\n        {fulfillmentStatus && <p>{fulfillmentStatus}</p>}\n        <Money data={order.totalPrice} />\n        <Link to={`/account/orders/${btoa(order.id)}`}>View Order \u2192</Link>\n      </fieldset>\n      <br />\n    </>\n  );\n}\n"],
  "mappings": "wdAAAA,IAmD6B,IAAAC,EAAA,OArChBC,EAAqB,IACzB,CAAC,CAAC,MAAO,QAAQ,CAAC,EA+BZ,SAARC,GAA0B,CAC/B,GAAM,CAAC,SAAAC,CAAQ,EAAIC,EAAkD,EAC/D,CAAC,OAAAC,CAAM,EAAIF,EACjB,SACE,OAAC,OAAI,UAAU,SACZ,SAAAE,EAAO,MAAM,UAAS,OAACC,EAAA,CAAY,OAAQD,EAAQ,KAAK,OAACE,EAAA,EAAY,EACxE,CAEJ,CAEA,SAASD,EAAY,CAAC,OAAAD,CAAM,EAA2C,CACrE,SACE,OAAC,OAAI,UAAU,kBACZ,SAAAA,GAAQ,MAAM,UACb,OAACG,EAAA,CAAW,WAAYH,EACrB,UAAC,CAAC,MAAAI,EAAO,UAAAC,EAAW,aAAAC,EAAc,SAAAC,CAAQ,OAEvC,oBACE,oBAACD,EAAA,CACE,SAAAD,EAAY,gBAAe,OAAC,QAAK,gCAAe,EACnD,EACCD,EAAM,IAAKI,MACH,OAACC,EAAA,CAAyB,MAAOD,GAAjBA,EAAM,EAAkB,CAChD,KACD,OAACD,EAAA,CACE,SAAAF,EAAY,gBAAe,OAAC,QAAK,4BAAW,EAC/C,GACF,EAGN,KAEA,OAACH,EAAA,EAAY,EAEjB,CAEJ,CAEA,SAASA,GAAc,CACrB,SACE,QAAC,OACC,oBAAC,KAAE,8CAAuC,KAC1C,OAAC,OAAG,KACJ,OAAC,KACC,mBAACQ,EAAA,CAAK,GAAG,eAAe,iCAAgB,EAC1C,GACF,CAEJ,CAEA,SAASD,EAAU,CAAC,MAAAD,CAAK,EAA+B,CACtD,IAAMG,EAAoBC,EAAkBJ,EAAM,YAAY,EAAE,CAAC,GAAG,OACpE,SACE,oBACE,qBAAC,YACC,oBAACE,EAAA,CAAK,GAAI,mBAAmBF,EAAM,KACjC,oBAAC,UAAO,cAAEA,EAAM,QAAO,EACzB,KACA,OAAC,KAAG,aAAI,KAAKA,EAAM,WAAW,EAAE,aAAa,EAAE,KAC/C,OAAC,KAAG,SAAAA,EAAM,gBAAgB,EACzBG,MAAqB,OAAC,KAAG,SAAAA,EAAkB,KAC5C,OAACE,EAAA,CAAM,KAAML,EAAM,WAAY,KAC/B,OAACE,EAAA,CAAK,GAAI,mBAAmB,KAAKF,EAAM,EAAE,IAAK,6BAAY,GAC7D,KACA,OAAC,OAAG,GACN,CAEJ",
  "names": ["init_esm", "import_jsx_runtime", "meta", "Orders", "customer", "useLoaderData", "orders", "OrdersTable", "EmptyOrders", "Sr", "nodes", "isLoading", "PreviousLink", "NextLink", "order", "OrderItem", "Link", "fulfillmentStatus", "flattenConnection", "Money"]
}
