import{b as p,c as v,d as f}from"https://cdn.shopify.com/oxygen-v2/31356/19637/40579/683287/build/_shared/chunk-TFFD2SGX.js";import{f as P,j as R,n as o,v as h,z as F}from"https://cdn.shopify.com/oxygen-v2/31356/19637/40579/683287/build/_shared/chunk-3T2GPJBB.js";import{a as N,b as y}from"https://cdn.shopify.com/oxygen-v2/31356/19637/40579/683287/build/_shared/chunk-YHLO7HBR.js";import{d as m}from"https://cdn.shopify.com/oxygen-v2/31356/19637/40579/683287/build/_shared/chunk-2GVARK7B.js";F();var u=m(N());function S(r,t){return t?r?.trackingParameters?`?${t}&${r.trackingParameters}`:`?${t}`:r?.trackingParameters?`?${r.trackingParameters}`:""}var e=m(y()),I=[{type:"queries",items:[]},{type:"products",items:[]},{type:"collections",items:[]},{type:"pages",items:[]},{type:"articles",items:[]}];function w({searchTerm:r}){let t=(0,u.useRef)(null);return(0,u.useEffect)(()=>{function a(i){i.key==="k"&&i.metaKey&&(i.preventDefault(),t.current?.focus()),i.key==="Escape"&&t.current?.blur()}return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}},[]),(0,e.jsxs)(R,{method:"get",children:[(0,e.jsx)("input",{defaultValue:r,name:"q",placeholder:"Search\u2026",ref:t,type:"search"}),"\xA0",(0,e.jsx)("button",{type:"submit",children:"Search"})]})}function O({results:r,searchTerm:t}){if(!r)return null;let a=Object.keys(r);return(0,e.jsx)("div",{children:r&&a.map(i=>{let s=r[i];if(s.nodes[0]?.__typename==="Page"){let c=s;return s.nodes.length?(0,e.jsx)(L,{pages:c},"pages"):null}if(s.nodes[0]?.__typename==="Product"){let c=s;return s.nodes.length?(0,e.jsx)(b,{products:c,searchTerm:t},"products"):null}if(s.nodes[0]?.__typename==="Article"){let c=s;return s.nodes.length?(0,e.jsx)(E,{articles:c},"articles"):null}return null})})}function b({products:r,searchTerm:t}){return(0,e.jsxs)("div",{className:"search-result",children:[(0,e.jsx)("h2",{children:"Products"}),(0,e.jsx)(f,{connection:r,children:({nodes:a,isLoading:i,NextLink:s,PreviousLink:c})=>{let n=a.map(l=>{let d=S(l,`q=${encodeURIComponent(t)}`);return(0,e.jsx)("div",{className:"search-results-item",children:(0,e.jsxs)(o,{prefetch:"intent",to:`/products/${l.handle}${d}`,children:[l.variants.nodes[0].image&&(0,e.jsx)(v,{data:l.variants.nodes[0].image,alt:l.title,width:50}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{children:l.title}),(0,e.jsx)("small",{children:(0,e.jsx)(p,{data:l.variants.nodes[0].price})})]})]})},l.id)});return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(0,e.jsx)(c,{children:i?"Loading...":(0,e.jsx)("span",{children:"\u2191 Load previous"})})}),(0,e.jsxs)("div",{children:[n,(0,e.jsx)("br",{})]}),(0,e.jsx)("div",{children:(0,e.jsx)(s,{children:i?"Loading...":(0,e.jsx)("span",{children:"Load more \u2193"})})})]})}}),(0,e.jsx)("br",{})]})}function L({pages:r}){return(0,e.jsxs)("div",{className:"search-result",children:[(0,e.jsx)("h2",{children:"Pages"}),(0,e.jsx)("div",{children:r?.nodes?.map(t=>(0,e.jsx)("div",{className:"search-results-item",children:(0,e.jsx)(o,{prefetch:"intent",to:`/pages/${t.handle}`,children:t.title})},t.id))}),(0,e.jsx)("br",{})]})}function E({articles:r}){return(0,e.jsxs)("div",{className:"search-result",children:[(0,e.jsx)("h2",{children:"Articles"}),(0,e.jsx)("div",{children:r?.nodes?.map(t=>(0,e.jsx)("div",{className:"search-results-item",children:(0,e.jsx)(o,{prefetch:"intent",to:`/blogs/${t.handle}`,children:t.title})},t.id))}),(0,e.jsx)("br",{})]})}function U(){return(0,e.jsx)("p",{children:"No results, try a different search."})}function D({action:r,children:t,className:a="predictive-search-form",...i}){let s=P(),c=h({key:"search"}),n=(0,u.useRef)(null);function l(d){let g=r??"/api/predictive-search",k=d.target.value||"",T=s.locale?`/${s.locale}${g}`:g;c.submit({q:k,limit:"6"},{method:"GET",action:T})}return(0,u.useEffect)(()=>{n?.current?.setAttribute("type","search")},[]),(0,e.jsx)(c.Form,{...i,className:a,onSubmit:d=>{d.preventDefault(),d.stopPropagation(),!(!n?.current||n.current.value==="")&&n.current.blur()},children:t({fetchResults:l,inputRef:n,fetcher:c})})}function j(){let{results:r,totalResults:t,searchInputRef:a,searchTerm:i,state:s}=M();function c(n){a.current&&(a.current.blur(),a.current.value="",window.location.href=n.currentTarget.href)}return s==="loading"?(0,e.jsx)("div",{children:"Loading..."}):t?(0,e.jsxs)("div",{className:"predictive-search-results",children:[(0,e.jsx)("div",{children:r.map(({type:n,items:l})=>(0,e.jsx)(z,{goToSearchResult:c,items:l,searchTerm:i,type:n},n))}),i.current&&(0,e.jsx)(o,{onClick:c,to:`/search?q=${i.current}`,children:(0,e.jsxs)("p",{children:["View all results for ",(0,e.jsx)("q",{children:i.current}),"\xA0 \u2192"]})})]}):(0,e.jsx)(A,{searchTerm:i})}function A({searchTerm:r}){return r.current?(0,e.jsxs)("p",{children:["No results found for ",(0,e.jsx)("q",{children:r.current})]}):null}function z({goToSearchResult:r,items:t,searchTerm:a,type:i}){let s=i==="queries",c=`/search?q=${a.current}&type=${q(i)}`;return(0,e.jsxs)("div",{className:"predictive-search-result",children:[(0,e.jsx)(o,{prefetch:"intent",to:c,onClick:r,children:(0,e.jsx)("h5",{children:s?"Suggestions":i})}),(0,e.jsx)("ul",{children:t.map(n=>(0,e.jsx)(C,{goToSearchResult:r,item:n},n.id))})]},i)}function C({goToSearchResult:r,item:t}){return(0,e.jsx)("li",{className:"predictive-search-result-item",children:(0,e.jsxs)(o,{onClick:r,to:t.url,children:[t.image?.url&&(0,e.jsx)(v,{alt:t.image.altText??"",src:t.image.url,width:50,height:50}),(0,e.jsxs)("div",{children:[t.styledTitle?(0,e.jsx)("div",{dangerouslySetInnerHTML:{__html:t.styledTitle}}):(0,e.jsx)("span",{children:t.title}),t?.price&&(0,e.jsx)("small",{children:(0,e.jsx)(p,{data:t.price})})]})]})},t.id)}function M(){let r=h({key:"search"}),t=(0,u.useRef)(""),a=(0,u.useRef)(null);r?.state==="loading"&&(t.current=r.formData?.get("q")||"");let i=r?.data?.searchResults||{results:I,totalResults:0};return(0,u.useEffect)(()=>{a.current||(a.current=document.querySelector('input[type="search"]'))},[]),{...i,searchInputRef:a,searchTerm:t,state:r.state}}function q(r){let t={articles:"ARTICLE",collections:"COLLECTION",pages:"PAGE",products:"PRODUCT",queries:"QUERY"};return typeof r=="string"?t[r]:r.map(a=>t[a]).join(",")}export{w as a,O as b,U as c,D as d,j as e};

